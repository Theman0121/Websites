"use strict";(self.webpackChunkreact_spy_financial=self.webpackChunkreact_spy_financial||[]).push([[817],{9817:function(e,t,r){r.r(t),r.d(t,{WalletConnectV1Adapter:function(){return xt}});var n=r(15861),a=r(15671),i=r(43144),o=r(97326),s=r(11752),c=r(60136),u=r(82963),p=r(61120),h=r(4942),f=r(64687),d=r.n(f),l=r(78453),v=r(23484),m=r(2583),y=r(29072),g=r(7861),w=r(62649),x=r.n(w),k={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},b={EIP155:"eip155",SOLANA:"solana",MULTICHAIN:"multichain"},P=function(e,t){if(e===k.OTHER)return null;var r=t?"number"===typeof t?t:parseInt(t,16):function(e){if(e===k.EIP155)return 1;if(e===k.SOLANA)return 1;throw new Error("Chain namespace ".concat(e," is not supported"))}(e);return e===k.EIP155?function(e){var t=k.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null}(r):e===k.SOLANA?function(e){var t=k.SOLANA;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null}(r):null};function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var O=function(e){(0,c.Z)(r,e);var t=E(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,n),(0,h.Z)((0,o.Z)(i),"code",void 0),(0,h.Z)((0,o.Z)(i),"message",void 0),i.code=e,i.message=n||"",Object.defineProperty((0,o.Z)(i),"name",{value:"Web3AuthError"}),i}return(0,i.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),r}(m.s),C=function(e){(0,c.Z)(r,e);var t=E(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,e,n),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletInitializationError"}),i}return(0,i.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5013,e)}}]),r}(O);(0,h.Z)(C,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var N=function(e){(0,c.Z)(r,e);var t=E(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,e,n),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletLoginError"}),i}return(0,i.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5114,e)}}]),r}(O);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(0,h.Z)(N,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var T={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},S=I({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},T),_=I({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},T),D=I(I({},_),S);function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={EXTERNAL:"external",IN_APP:"in_app"},G={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},F=A(A({},G),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),L=function(e){(0,c.Z)(r,e);var t=j(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,h.Z)((0,o.Z)(e),"adapterData",{}),(0,h.Z)((0,o.Z)(e),"sessionTime",86400),(0,h.Z)((0,o.Z)(e),"chainConfig",null),e}return(0,i.Z)(r,[{key:"chainConfigProxy",get:function(){return this.chainConfig?A({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==G.READY){if(!e.chainNamespace)throw C.notReady("ChainNamespace is required while setting chainConfig");var t=P(e.chainNamespace,e.chainId);this.chainConfig=A(A({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==D.WALLET_CONNECT_V1||this.status!==G.CONNECTING){if(this.status===G.CONNECTING)throw C.notReady("Already connecting");if(this.status===G.CONNECTED)throw N.connectionError("Already connected");if(this.status!==G.READY)throw N.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw N.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==G.NOT_READY){if(this.status===G.CONNECTED)throw C.notReady("Already connected");if(this.status===G.READY)throw C.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit(F.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),r}(v.Ue),B="https://authjs.web3auth.io",W=x().getLogger("web3auth-logger");function V(e){var t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(o){var i=o;return!(!i||22!==i.code&&1014!==i.code&&"QuotaExceededError"!==i.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==i.name||!r||0===n)}}var q=function(e){return("string"===typeof e||"number"===typeof e)&&/^(-)?0x[0-9a-f]*$/i.test(e)},H=function(e){var t=(0,g.Z)(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)},K=function(){var e=(0,n.Z)(d().mark((function e(t,r){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={payload:t,header:{t:"solana"===r?"sip99":"eip191"},network:"solana"===r?"solana":"ethereum"},e.next=6,(0,y.v_)("".concat(B,"/siww/get"),n);case 6:if((a=e.sent).success){e.next=9;break}throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return e.abrupt("return",a.challenge);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),U=function(){var e=(0,n.Z)(d().mark((function e(t,r,n,a,i,o){var s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={signature:{s:r,t:"solana"===t?"sip99":"eip191"},message:n,issuer:a,audience:window.location.hostname,timeout:i},e.next=4,(0,y.v_)("".concat(B,"/siww/verify"),s,{headers:{client_id:o,wallet_provider:a}});case 4:if((c=e.sent).success){e.next=8;break}throw W.error("Failed to authenticate user, ,message verification failed",c.error),new Error("Failed to authenticate user, ,message verification failed");case 8:return e.abrupt("return",c.token);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o){return e.apply(this,arguments)}}(),z=function(e,t,r){return V("localStorage")?localStorage.setItem("".concat(e.toLowerCase(),"_").concat(t),r):null};function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var J=function(e){(0,c.Z)(r,e);var t=Y(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)(this,r),e=t.call(this),(0,h.Z)((0,o.Z)(e),"clientId",void 0),e.clientId=n.clientId,e}return(0,i.Z)(r,[{key:"authenticateUser",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,r,n,a,i,o,s,c,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider&&null!==(t=this.chainConfig)&&void 0!==t&&t.chainId){e.next=2;break}throw N.notConnectedError();case 2:if(r=this.chainConfig,n=r.chainNamespace,a=r.chainId,this.status===G.CONNECTED){e.next=5;break}throw N.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"eth_accounts"});case 7:if(!((i=e.sent)&&i.length>0)){e.next=26;break}if(h=i[0],f=this.name,!(o=V("localStorage")?localStorage.getItem("".concat(h.toLowerCase(),"_").concat(f)):null)){e.next=14;break}if(H(o)){e.next=14;break}return e.abrupt("return",{idToken:o});case 14:return s={domain:window.location.origin,uri:window.location.href,address:i[0],chainId:parseInt(a,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},e.next=17,K(s,n);case 17:return c=e.sent,e.next=20,this.provider.request({method:"personal_sign",params:[c,i[0]]});case 20:return u=e.sent,e.next=23,U(n,u,c,this.name,this.sessionTime,this.clientId);case 23:return p=e.sent,z(i[0],this.name,p),e.abrupt("return",{idToken:p});case 26:throw N.notConnectedError("Not connected with wallet, Please login/connect first");case 27:case"end":return e.stop()}var h,f}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===G.CONNECTED){e.next=2;break}throw N.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"eth_accounts"});case 4:(t=e.sent)&&t.length>0&&(r=t[0],n=this.name,V("localStorage")&&localStorage.removeItem("".concat(r.toLowerCase(),"_").concat(n)));case 6:case"end":return e.stop()}var r,n}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(L),X=r(7874),Q=r(98689),$=r(39702),ee=r.n($);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var ae=function(e){(0,c.Z)(r,e);var t=ne(r);function r(e){var n,i,c=e.config,u=e.state;if((0,a.Z)(this,r),i=t.call(this,{config:c,state:u}),(0,h.Z)((0,o.Z)(i),"_providerEngineProxy",null),!c.chainConfig)throw C.invalidProviderConfigError("Please provide chainConfig");if(!c.chainConfig.chainId)throw C.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!c.chainConfig.rpcTarget)throw C.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return i.defaultState={chainId:"loading"},i.defaultConfig={chainConfig:c.chainConfig,networks:(0,h.Z)({},c.chainConfig.chainId,c.chainConfig)},(0,s.Z)((n=(0,o.Z)(i),(0,p.Z)(r.prototype)),"initialize",n).call(n),i}return(0,i.Z)(r,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){if(!e.chainId)throw Q.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw Q.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:re(re({},this.config.networks),{},(0,h.Z)({},e.chainId,e))})}},{key:"getChainConfig",value:function(e){var t,r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw Q.ethErrors.rpc.invalidRequest("Chain ".concat(e," is not supported, please add chainConfig for it"));return r}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,X.qY)(e)}}]),r}(X.xG),ie=function(){function e(){(0,a.Z)(this,e),(0,h.Z)(this,"_providerEngineProxy",null)}return(0,i.Z)(e,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){throw new Error("Method not implemented.")}},{key:"setupProvider",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getPrivKeyMiddleware(t),(n=new v.eI).push(r),a=(0,X.Xj)(n),this.updateProviderEngineProxy(a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,X.qY)(e)}},{key:"getPrivKeyMiddleware",value:function(e){var t={getPrivatekey:function(){var t=(0,n.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()};return this.createPrivKeyMiddleware(t)}},{key:"createPrivKeyMiddleware",value:function(e){var t=e.getPrivatekey;function r(){return(r=(0,n.Z)(d().mark((function e(r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({private_key:(0,v.Pk)((function(e,t){return r.apply(this,arguments)}))})}}]),e}();(0,h.Z)(ie,"getProviderInstance",function(){var e=(0,n.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new ie,e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());ee()();var oe=r(22044),se=r(2109),ce=r(60225),ue=r(71002),pe=r(75205),he=r.n(pe),fe=r(2050),de=r(52422),le=r(53582),ve=r.n(le),me=r(53085).lW;function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e){return 42===e.length}function xe(e){var t=e.getAccounts,r=e.getPrivateKey,a=e.processDecryptMessage,i=e.processEncryptionPublicKey,o=e.processEthSignMessage,s=e.processPersonalMessage,c=e.processTransaction,u=e.processSignTransaction,p=e.processTypedMessage,h=e.processTypedMessageV3,f=e.processTypedMessageV4;if(!t)throw new Error("opts.getAccounts is required");function l(e,t){return m.apply(this,arguments)}function m(){return(m=(0,n.Z)(d().mark((function e(r,n){var a,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof r&&r.length>0)){e.next=8;break}return e.next=3,t(n);case 3:if(a=e.sent,i=a.map((function(e){return e.toLowerCase()})),o=r.toLowerCase(),!i.includes(o)){e.next=8;break}return e.abrupt("return",o);case 8:throw Q.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,n.Z)(d().mark((function e(r,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:n.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,n.Z)(d().mark((function e(r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:a=e.sent,n.result=a[0]||null;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,n.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,l(n.from,t);case 5:return n.from=e.sent,e.next=8,c(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=(0,n.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,l(n.from,t);case 5:return n.from=e.sent,e.next=8,u(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=(0,n.Z)(d().mark((function e(t,r){var n,a,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],i=t.params[2]||{},s=ge(ge({},i),{},{from:n,data:a}),e.next=10,o(s,t);case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=(0,n.Z)(d().mark((function e(t,r){var n,a,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],e.next=5,l(t.params[1],t);case 5:return a=e.sent,"V1",i=t.params[2]||{},o=ge(ge({},i),{},{from:a,data:n}),e.next=11,p(o,t,"V1");case 11:r.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=(0,n.Z)(d().mark((function e(t,r){var n,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],"V3",i={data:a,from:n,version:"V3"},e.next=10,h(i,t,"V3");case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,n.Z)(d().mark((function e(t,r){var n,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],"V4",i={data:a,from:n,version:"V4"},e.next=10,f(i,t,"V4");case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,n.Z)(d().mark((function e(t,r){var n,a,i,o,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],a=t.params[1],i=t.params[2]||{},we(n)&&!we(a)?("The eth_personalSign method requires params ordered ","[message, address]. This was previously handled incorrectly, ","and has been corrected automatically. ","Please switch this param order for smooth behavior in the future.",r.warning="The eth_personalSign method requires params ordered [message, address]. This was previously handled incorrectly, and has been corrected automatically. Please switch this param order for smooth behavior in the future.",o=n,c=a):(c=n,o=a),e.next=8,l(o,t);case 8:return o=e.sent,u=ge(ge({},i),{},{from:o,data:c}),e.next=12,s(u,t);case 12:r.result=e.sent;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=(0,n.Z)(d().mark((function e(t,r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,e.next=7,i(n,t);case 7:r.result=e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=(0,n.Z)(d().mark((function e(t,r){var n,i,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],e.next=5,l(t.params[1],t);case 5:i=e.sent,o=t.params[2]||{},s=ge(ge({},o),{},{from:i,data:n}),r.result=a(s,t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=(0,n.Z)(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw Q.ethErrors.rpc.methodNotSupported();case 2:n.result=r(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({eth_accounts:(0,v.Pk)((function(e,t){return y.apply(this,arguments)})),eth_private_key:(0,v.Pk)((function(e,t){return Z.apply(this,arguments)})),eth_coinbase:(0,v.Pk)((function(e,t){return g.apply(this,arguments)})),eth_sendTransaction:(0,v.Pk)((function(e,t){return w.apply(this,arguments)})),eth_signTransaction:(0,v.Pk)((function(e,t){return x.apply(this,arguments)})),eth_sign:(0,v.Pk)((function(e,t){return k.apply(this,arguments)})),eth_signTypedData:(0,v.Pk)((function(e,t){return b.apply(this,arguments)})),eth_signTypedData_v3:(0,v.Pk)((function(e,t){return P.apply(this,arguments)})),eth_signTypedData_v4:(0,v.Pk)((function(e,t){return E.apply(this,arguments)})),personal_sign:(0,v.Pk)((function(e,t){return O.apply(this,arguments)})),eth_getEncryptionPublicKey:(0,v.Pk)((function(e,t){return C.apply(this,arguments)})),eth_decrypt:(0,v.Pk)((function(e,t){return N.apply(this,arguments)}))})}function ke(e){var t=e.getAccounts,r=e.getPrivateKey,n=e.processTransaction,a=e.processSignTransaction,i=e.processEthSignMessage,o=e.processTypedMessage,s=e.processTypedMessageV3,c=e.processTypedMessageV4,u=e.processPersonalMessage,p=e.processEncryptionPublicKey,h=e.processDecryptMessage;return(0,v.UZ)([(0,v.v0)({eth_syncing:!1}),xe({getAccounts:t,getPrivateKey:r,processTransaction:n,processEthSignMessage:i,processSignTransaction:a,processTypedMessage:o,processTypedMessageV3:s,processTypedMessageV4:c,processPersonalMessage:u,processEncryptionPublicKey:p,processDecryptMessage:h})])}function be(e){return function(t,r,n,a){return"eth_chainId"===t.method?(r.result=e,a()):n()}}function Pe(e){return function(t,r,n,a){return"eth_provider_config"===t.method?(r.result=e,a()):n()}}function Ee(e){var t=e.chainId,r=e.rpcTarget,n=(0,X.v$)({rpcTarget:r});return{networkMiddleware:(0,v.UZ)([be(t),Pe(e),n]),fetchMiddleware:n}}function Oe(e){var t=e.connector;return{getPrivateKey:function(){var e=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Q.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,n.Z)(d().mark((function e(r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.accounts)||!n.length){e.next=3;break}return e.abrupt("return",n);case 3:throw new Error("Failed to get accounts");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTransaction:function(){var e=(0,n.Z)(d().mark((function e(r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendTransaction(r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=(0,n.Z)(d().mark((function e(r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTransaction(r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=(0,n.Z)(d().mark((function e(r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signMessage([r.from,r.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var e=(0,n.Z)(d().mark((function e(r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signPersonalMessage([r.data,r.from]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessage:function(){var e=(0,n.Z)(d().mark((function e(r,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessageV3:function(){var e=(0,n.Z)(d().mark((function e(r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTypedMessageV4:function(){var e=(0,n.Z)(d().mark((function e(r){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=(0,n.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Q.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processDecryptMessage:function(e){throw Q.ethErrors.rpc.methodNotSupported()}}}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var Ie=function(e){(0,c.Z)(r,e);var t=Ze(r);function r(e){var n,i=e.config,s=e.state,c=e.connector;return(0,a.Z)(this,r),n=t.call(this,{config:{chainConfig:Ne(Ne({},i.chainConfig),{},{chainNamespace:k.EIP155}),skipLookupNetwork:!!i.skipLookupNetwork},state:Ne(Ne({},s||{}),{},{chainId:"loading",accounts:[]})}),(0,h.Z)((0,o.Z)(n),"connector",null),n.connector=c||null,n}return(0,i.Z)(r,[{key:"enable",value:function(){var e=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw Q.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 2:return e.next=4,this.setupProvider(this.connector);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onConnectorStateUpdate(t),e.next=3,this.setupEngine(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i,o,s,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.chainId,n=t.addChain,a=void 0===n||n,i=t.lookup,o=void 0===i||i,this.connector){e.next=3;break}throw Q.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 3:if(s=this.getChainConfig(r),this.update({chainId:"loading"}),c=s.rpcTarget,u=s.displayName,!a){e.next=15;break}return e.prev=7,e.next=10,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:u,rpcUrls:[c]}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),W.error(e.t0);case 15:return e.prev=15,e.next=18,this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:r}]});case 18:e.next=25;break;case 20:if(e.prev=20,e.t1=e.catch(15),W.error(e.t1),"JSON RPC response format is invalid"===e.t1.message){e.next=25;break}throw e.t1;case 25:if(this.configure({chainConfig:s}),!o){e.next=29;break}return e.next=29,this.lookupNetwork(this.connector);case 29:case"end":return e.stop()}}),e,this,[[7,12],[15,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=(0,n.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw C.notReady("Wallet adapter is not ready yet");case 2:return n=t.rpcTarget,a=t.displayName,e.prev=3,e.next=6,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t.chainId,chainName:a,rpcUrls:[n]}]});case 6:(0,s.Z)((0,p.Z)(r.prototype),"addChain",this).call(this,t),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),W.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.connected){e.next=2;break}throw N.notConnectedError("Wallet connect connector is not connected");case 2:if(this.provider){e.next=4;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 4:if(r=this.config.chainConfig.chainId,n=q(t.chainId.toString())?t.chainId:"0x".concat(t.chainId.toString(16)),r===n){e.next=8;break}throw C.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(r));case 8:return this.provider.emit("connect",{chainId:r}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oe({connector:t}),this.update({accounts:t.accounts||[]}),n=ke(r),a=new v.eI,i=Ee(this.config.chainConfig),o=i.networkMiddleware,a.push(n),a.push(o),s=(0,X.Xj)(a),this.updateProviderEngineProxy(s),this.config.skipLookupNetwork){e.next=12;break}return e.next=12,this.lookupNetwork(t);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectorStateUpdate",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("session_update",function(){var e=(0,n.Z)(d().mark((function e(n,a){var i,o,s,c,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.provider){e.next=2;break}throw N.notConnectedError("Wallet connect connector is not connected");case 2:if(!n){e.next=5;break}return r.provider.emit("error",n),e.abrupt("return");case 5:if(i=a.params[0],o=i.accounts,s=i.chainId,c=i.rpcUrl,null!==o&&void 0!==o&&o.length&&r.state.accounts[0]!==o[0]&&(r.update({accounts:o}),r.provider.emit("accountsChanged",o)),u="0x".concat(s.toString(16)),!s||r.state.chainId===u){e.next=13;break}return p=P(k.EIP155,s)||{},r.configure({chainConfig:Ne(Ne({},p),{},{chainId:u,rpcTarget:c,chainNamespace:k.EIP155})}),e.next=13,r.setupEngine(t);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(ae);(0,h.Z)(Ie,"getProviderInstance",function(){var e=(0,n.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ie({config:{chainConfig:t.chainConfig,skipLookupNetwork:t.skipLookupNetwork}}),e.next=3,r.setupProvider(t.connector);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Te=new de.Z("1e18"),Se=new de.Z("1e9"),_e=new de.Z("1"),De={hex:function(e){return"string"===typeof e?new de.Z((0,ce.stripHexPrefix)(e),16):new de.Z(e,16)},dec:function(e){return new de.Z(e,10)}},je={WEI:function(e){return e.div(Te)},GWEI:function(e){return e.div(Se)},ETH:function(e){return e.div(_e)}},Re={WEI:function(e){return e.times(Te).dp(0,de.Z.ROUND_HALF_UP)},GWEI:function(e){return e.times(Se).dp(9,de.Z.ROUND_HALF_UP)},ETH:function(e){return e.times(_e).dp(9,de.Z.ROUND_HALF_UP)}},Ae={hex:function(e){return e.toString(16)},dec:function(e){return new de.Z(e).toString(10)}},Me=function(e,t){var r=t.fromNumericBase;return function(e){var t=e.value,r=e.fromNumericBase,n=e.fromDenomination,a=e.toNumericBase,i=e.toDenomination,o=e.numberOfDecimals,s=De[r](t);return n&&(s=je[n](s)),i&&(s=Re[i](s)),o&&(s=s.dp(o,de.Z.ROUND_HALF_DOWN)),a&&(s=Ae[a](s)),s}({fromNumericBase:void 0===r?"hex":r,toNumericBase:t.toNumericBase,fromDenomination:t.fromDenomination,toDenomination:t.toDenomination,numberOfDecimals:t.numberOfDecimals,value:e||"0"})};function Ge(e){return Me(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function Fe(e){return Me(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function We(e){return Fe(Ge(e))}function Ve(e){return qe.apply(this,arguments)}function qe(){return(qe=(0,n.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.U2)(t);case 2:return r=e.sent,n=Be(Be({},r),{},{estimatedBaseFee:We(r.estimatedBaseFee),low:Be(Be({},r.low),{},{suggestedMaxPriorityFeePerGas:We(r.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:We(r.low.suggestedMaxFeePerGas)}),medium:Be(Be({},r.medium),{},{suggestedMaxPriorityFeePerGas:We(r.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:We(r.medium.suggestedMaxFeePerGas)}),high:Be(Be({},r.high),{},{suggestedMaxPriorityFeePerGas:We(r.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:We(r.high.suggestedMaxFeePerGas)})}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,n.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.U2)(t,{referrer:t,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});case 2:return r=e.sent,e.abrupt("return",{low:r.SafeGasPrice,medium:r.ProposeGasPrice,high:r.FastGasPrice});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ue=function(e,t){var r;try{he().ok(e&&"object"===(0,ue.Z)(e),"Params must be an object."),he().ok("data"in e,'Params must include a "data" field.'),he().ok("from"in e,'Params must include a "from" field.'),he().ok("string"===typeof e.from&&(0,ce.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');var n=null,a=null;switch(e.version){case se.SignTypedDataVersion.V1:"string"===typeof e.data?he().doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,he().ok(Array.isArray(n),"params.data must be an array."),he().doesNotThrow((function(){(0,se.typedSignatureHash)(n)}),"Signing data must be valid EIP-712 typed data.");break;case se.SignTypedDataVersion.V3:case se.SignTypedDataVersion.V4:"string"===typeof e.data?he().doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,he().ok(n.primaryType in n.types,'Primary type of "'.concat(n.primaryType,'" has no type definition.'));var i=fe.validate(n,se.TYPED_MESSAGE_SCHEMA.properties);he().strictEqual(i.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),(a=null===(r=n.domain)||void 0===r?void 0:r.chainId)&&(he().ok(!Number.isNaN(t),'Cannot sign messages for chainId "'.concat(a,'", because Web3Auth is switching networks.')),"string"===typeof a&&(a=Number.parseInt(a,q(a)?16:10)),he().strictEqual(a,t,'Provided chainId "'.concat(a,'" must match the active chainId "').concat(t,'"')));break;default:he().fail('Unknown typed data version "'.concat(e.version,'"'))}}catch(o){throw Q.ethErrors.rpc.invalidInput({message:null===o||void 0===o?void 0:o.message})}};function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e,t,r){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,n.Z)(d().mark((function e(t,r,n){var a,i,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.formatTransaction(t);case 2:return a=e.sent,e.next=5,n.getCommonConfiguration();case 5:return i=e.sent,o=oe.TransactionFactory.fromTxData(a,{common:i}),s=o.sign(me.from(r,"hex")).serialize(),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){var t=e.txFormatter,r=e.privKey,a=e.getProviderEngineProxy;return{getAccounts:function(){var e=(0,n.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["0x".concat((0,ce.privateToAddress)(me.from(r,"hex")).toString("hex"))]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=(0,n.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTransaction:function(){var e=(0,n.Z)(d().mark((function e(n,i){var o,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a()){e.next=3;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,Je(n,r,t);case 5:return s=e.sent,e.next=8,o.request({method:"eth_sendRawTransaction",params:["0x".concat(s.toString("hex"))]});case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=(0,n.Z)(d().mark((function e(n,i){var o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a()){e.next=3;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,Je(n,r,t);case 5:return o=e.sent,e.abrupt("return","0x".concat(o.toString("hex")));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=(0,n.Z)(d().mark((function e(t,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,X.l)(r,t.data),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var e=(0,n.Z)(d().mark((function e(t,n){var a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=me.from(r,"hex"),i=(0,se.personalSign)({privateKey:a,data:t.data}),e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessage:function(){var e=(0,n.Z)(d().mark((function e(t,n){var i,o,s,c,u,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.debug("processTypedMessage",t),i=me.from(r,"hex"),o=a()){e.next=5;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,q(s)?16:10),u=Ye(Ye({},t),{},{version:se.SignTypedDataVersion.V1}),Ue(u,c),p="string"===typeof u.data?JSON.parse(u.data):u.data,h=(0,se.signTypedData)({privateKey:i,data:p,version:se.SignTypedDataVersion.V1}),e.abrupt("return",h);case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessageV3:function(){var e=(0,n.Z)(d().mark((function e(t,n){var i,o,s,c,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.debug("processTypedMessageV3",t),i=me.from(r,"hex"),o=a()){e.next=5;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,q(s)?16:10),Ue(t,c),u="string"===typeof t.data?JSON.parse(t.data):t.data,p=(0,se.signTypedData)({privateKey:i,data:u,version:se.SignTypedDataVersion.V3}),e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessageV4:function(){var e=(0,n.Z)(d().mark((function e(t,n){var i,o,s,c,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.debug("processTypedMessageV4",t),i=me.from(r,"hex"),o=a()){e.next=5;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,q(s)?16:10),Ue(t,c),u="string"===typeof t.data?JSON.parse(t.data):t.data,p=(0,se.signTypedData)({privateKey:i,data:u,version:se.SignTypedDataVersion.V4}),e.abrupt("return",p);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=(0,n.Z)(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W.info("processEncryptionPublicKey",t),e.abrupt("return",(0,se.getEncryptionPublicKey)(r));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processDecryptMessage:function(e,t){W.info("processDecryptMessage",e);var n=(0,ce.stripHexPrefix)(e.data),a=me.from(n,"hex");return(0,se.decrypt)({encryptedData:JSON.parse(a.toString("utf8")),privateKey:r})}}}function $e(e){return(0,ce.addHexPrefix)(e.toString(16))}function et(e){return ce.BN.isBN(e)?e:new ce.BN((0,ce.stripHexPrefix)(e),16)}function tt(e,t,r){var n=new ce.BN(t),a=new ce.BN(r);return e.mul(n).div(a)}var rt="0x0",nt="0x2",at="sentEther",it="contractInteraction",ot="contractDeployment",st="fee-market",ct="legacy",ut="eth_gasPrice";function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ft=function(){function e(t){var r=t.getProviderEngineProxy;(0,a.Z)(this,e),(0,h.Z)(this,"chainConfig",null),(0,h.Z)(this,"getProviderEngineProxy",void 0),(0,h.Z)(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=r}return(0,i.Z)(e,[{key:"providerProxy",get:function(){return this.getProviderEngineProxy()}},{key:"init",value:function(){var e=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_provider_config",params:[]});case 2:return this.chainConfig=e.sent,e.next=5,this.getEIP1559Compatibility();case 5:this.isEIP1559Compatible=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCommonConfiguration",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,r,n,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:return t=this.chainConfig,r=t.displayName,n=t.chainId,a=this.isEIP1559Compatible?le.Hardfork.London:le.Hardfork.Berlin,i={name:r,chainId:"loading"===n?0:Number.parseInt(n,16),networkId:"loading"===n?0:Number.parseInt(n,16),defaultHardfork:a},e.abrupt("return",ve().custom(i));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatTransaction",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i,o,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(void 0!==(r=ht({},t)).nonce){e.next=7;break}return e.next=6,this.providerProxy.request({method:"eth_getTransactionCount",params:[t.from,"latest"]});case 6:r.nonce=e.sent;case 7:if(this.isEIP1559Compatible||!r.gasPrice){e.next=19;break}if(r.maxFeePerGas&&delete r.maxFeePerGas,r.maxPriorityFeePerGas&&delete r.maxPriorityFeePerGas,r.gas){e.next=17;break}return e.next=13,this.getDefaultGasLimit(r);case 13:(n=e.sent)&&(r.gasLimit=n),e.next=18;break;case 17:r.gasLimit=r.gas;case 18:return e.abrupt("return",r);case 19:if(r.gas){e.next=26;break}return e.next=22,this.getDefaultGasLimit(r);case 22:(a=e.sent)&&(r.gasLimit=a),e.next=27;break;case 26:r.gasLimit=r.gas;case 27:return e.next=29,this.getDefaultGasFees(r);case 29:return i=e.sent,o=i.gasPrice,s=i.maxFeePerGas,c=i.maxPriorityFeePerGas,this.isEIP1559Compatible?(!r.gasPrice||r.maxFeePerGas||r.maxPriorityFeePerGas?(s&&!r.maxFeePerGas&&(r.maxFeePerGas=s),c&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=c),o&&!r.maxFeePerGas&&(r.maxFeePerGas=o),r.maxFeePerGas&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=r.maxFeePerGas)):(r.maxFeePerGas=r.gasPrice,r.maxPriorityFeePerGas=(u="string"===typeof c?(0,ce.stripHexPrefix)(c):c,p="string"===typeof r.gasPrice?(0,ce.stripHexPrefix)(r.gasPrice):r.gasPrice,null!==u&&void 0!==u&&null!==p&&void 0!==p&&new de.O(u,10).lt(p,10)?c:r.gasPrice)),delete r.gasPrice):(delete r.maxPriorityFeePerGas,delete r.maxFeePerGas),!o||r.gasPrice||r.maxPriorityFeePerGas||r.maxFeePerGas||(r.gasPrice=o),r.type=this.isEIP1559Compatible?nt:rt,r.chainId=this.chainConfig.chainId,e.abrupt("return",r);case 38:case"end":return e.stop()}var u,p}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchEthGasPriceEstimate",value:function(){var e=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_gasPrice",params:[]});case 2:return t=e.sent,e.abrupt("return",{gasPrice:Fe(t).toString()});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEIP1559Compatibility",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return t=e.sent,r=t&&void 0!==t.baseFeePerGas,e.abrupt("return",!!r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGasFeeEstimateData",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,r,n,a,i,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(t="0x1"===this.chainConfig.chainId,r=Number.parseInt(this.chainConfig.chainId,16),e.prev=4,!this.isEIP1559Compatible){e.next=12;break}return e.next=8,Ve("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>","".concat(r)));case 8:a=e.sent,n={gasFeeEstimates:a,gasEstimateType:st},e.next=20;break;case 12:if(!t){e.next=19;break}return e.next=15,He("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>","".concat(r)));case 15:i=e.sent,n={gasFeeEstimates:i,gasEstimateType:ct},e.next=20;break;case 19:throw new Error("Main gas fee/price estimation failed. Use fallback");case 20:e.next=34;break;case 22:return e.prev=22,e.t0=e.catch(4),e.prev=24,e.next=27,this.fetchEthGasPriceEstimate();case 27:o=e.sent,n={gasFeeEstimates:o,gasEstimateType:ut},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(24),new Error("Gas fee/price estimation failed. Message: ".concat(e.t1.message));case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this,[[4,22],[24,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultGasFees",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i,o,s,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isEIP1559Compatible&&t.gasPrice||this.isEIP1559Compatible&&t.maxFeePerGas&&t.maxPriorityFeePerGas)){e.next=2;break}return e.abrupt("return",{});case 2:return e.prev=2,e.next=5,this.fetchGasFeeEstimateData();case 5:if(r=e.sent,n=r.gasFeeEstimates,a=r.gasEstimateType,!this.isEIP1559Compatible||a!==st){e.next=16;break}if(i=n.medium,o=(i=void 0===i?{}:i).suggestedMaxPriorityFeePerGas,s=i.suggestedMaxFeePerGas,!o||!s){e.next=14;break}return e.abrupt("return",{maxFeePerGas:(0,ce.addHexPrefix)(Ge(s)),maxPriorityFeePerGas:(0,ce.addHexPrefix)(Ge(o))});case 14:e.next=22;break;case 16:if(a!==ct){e.next=20;break}return e.abrupt("return",{gasPrice:(0,ce.addHexPrefix)(Ge(n.medium))});case 20:if(a!==ut){e.next=22;break}return e.abrupt("return",{gasPrice:(0,ce.addHexPrefix)(Ge(n.gasPrice))});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),W.error(e.t0);case 27:return e.next=29,this.fetchEthGasPriceEstimate();case 29:return c=e.sent,u=c.gasPrice,e.abrupt("return",{gasPrice:(0,ce.addHexPrefix)(Ge(u))});case 32:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"estimateTxGas",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=ht({},t)).gasPrice,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,e.next=6,this.providerProxy.request({method:"eth_estimateGas",params:[r]});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"analyzeGasUsage",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return r=e.sent,n=et(r.gasLimit),a=tt(n,19,20),i=$e(a),e.prev=6,e.next=9,this.estimateTxGas(t);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),W.warn(e.t0);case 15:return e.abrupt("return",{blockGasLimit:r.gasLimit,estimatedGasHex:i});case 16:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addGasBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,n=et(e),a=et(t).muln(.9),i=n.muln(r);return n.gt(a)?$e(n):i.lt(a)?$e(i):$e(a)}},{key:"determineTransactionCategory",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,n=t.to,a="",!r||n){e.next=6;break}i=ot,e.next=17;break;case 6:return e.prev=6,e.next=9,this.providerProxy.request({method:"eth_getCode",params:[n,"latest"]});case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),W.warn(e.t0);case 15:i=!a||"0x"===a||"0x0"===a?at:it;case 17:return e.abrupt("return",{transactionCategory:i,code:a});case 18:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultGasLimit",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.determineTransactionCategory(ht({},t));case 2:if(r=e.sent,n=r.transactionCategory,!t.gas){e.next=6;break}return e.abrupt("return",t.gas);case 6:if(!t.to||n!==at){e.next=11;break}if(!t.data){e.next=9;break}throw Error("TxGasUtil - Trying to call a function on a non-contract address");case 9:return 21e3,e.abrupt("return",(0,ce.addHexPrefix)(21e3.toString(16)));case 11:return e.next=13,this.analyzeGasUsage(t);case 13:return a=e.sent,i=a.blockGasLimit,o=a.estimatedGasHex,s=this.addGasBuffer((0,ce.addHexPrefix)(o),i),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var mt=function(e){(0,c.Z)(r,e);var t=vt(r);function r(e){var n=e.config,i=e.state;return(0,a.Z)(this,r),t.call(this,{config:{chainConfig:lt(lt({},n.chainConfig),{},{chainNamespace:k.EIP155})},state:i})}return(0,i.Z)(r,[{key:"enable",value:function(){var e=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw Q.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i,o,s,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new ft({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),n=Qe({txFormatter:r,privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),a=ke(n),i=this.getChainSwitchMiddleware(),o=new v.eI,s=Ee(this.config.chainConfig),c=s.networkMiddleware,o.push(a),o.push(i),o.push(this.getAccountMiddleware()),o.push(c),u=(0,X.Xj)(o),this.updateProviderEngineProxy(u),e.next=14,r.init();case 14:return e.next=16,this.lookupNetwork();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=(0,n.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"eth_private_key"});case 4:if(e.sent===t.privateKey){e.next=14;break}return e.next=8,this.setupProvider(t.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"eth_accounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r=this.getChainConfig(t.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:r}),e.next=7,this._providerEngineProxy.request({method:"eth_private_key"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw Q.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:if(t=this.config.chainConfig.chainId){e.next=5;break}throw Q.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");case 5:return e.next=7,this._providerEngineProxy.request({method:"net_version",params:[]});case 7:if(r=e.sent,parseInt(t,16)===parseInt(r,10)){e.next=10;break}throw Q.ethErrors.provider.chainDisconnected("Invalid network, net_version is: ".concat(r));case 10:return this.state.chainId!==t&&(this._providerEngineProxy.emit("chainChanged",t),this._providerEngineProxy.emit("connect",{chainId:t})),this.update({chainId:t}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var e=this,t={addChain:function(){var t=(0,n.Z)(d().mark((function t(r){var n,a,i,o,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.chainId,a=r.chainName,i=r.rpcUrls,o=r.blockExplorerUrls,s=r.nativeCurrency,e.addChain({chainNamespace:"eip155",chainId:n,ticker:(null===s||void 0===s?void 0:s.symbol)||"ETH",tickerName:(null===s||void 0===s?void 0:s.name)||"Ether",displayName:a,rpcTarget:i[0],blockExplorer:(null===o||void 0===o?void 0:o[0])||""});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),switchChain:function(){var t=(0,n.Z)(d().mark((function t(r){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.chainId,t.next=3,e.switchChain({chainId:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r=function(e){var t=e.addChain,r=e.switchChain;function a(){return(a=(0,n.Z)(d().mark((function e(r,n){var a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0){e.next=3;break}throw Q.ethErrors.rpc.invalidParams("Missing chain params");case 3:if(i.chainId){e.next=5;break}throw Q.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(i.rpcUrls&&0!==i.rpcUrls.length){e.next=7;break}throw Q.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(i.nativeCurrency){e.next=9;break}throw Q.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:return e.next=11,t(i);case 11:n.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=(0,n.Z)(d().mark((function e(t,n){var a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0){e.next=3;break}throw Q.ethErrors.rpc.invalidParams("Missing chainId");case 3:return e.next=5,r(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({wallet_addEthereumChain:(0,v.Pk)((function(e,t){return a.apply(this,arguments)})),wallet_switchEthereumChain:(0,v.Pk)((function(e,t){return i.apply(this,arguments)}))})}(t);return r}},{key:"getAccountMiddleware",value:function(){var e=this,t={updatePrivatekey:function(){var t=(0,n.Z)(d().mark((function t(r){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.privateKey,t.next=3,e.updateAccount({privateKey:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e){var t=e.updatePrivatekey;function r(){return(r=(0,n.Z)(d().mark((function e(r,n){var a,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0)&&void 0!==i&&i.privateKey){e.next=3;break}throw Q.ethErrors.rpc.invalidParams("Missing privateKey");case 3:return e.next=5,t(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({wallet_updateAccount:(0,v.Pk)((function(e,t){return r.apply(this,arguments)}))})}(t)}}]),r}(ae);(0,h.Z)(mt,"getProviderInstance",function(){var e=(0,n.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new mt({config:{chainConfig:t.chainConfig}}),e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var yt=[{name:"Rainbow",chains:[k.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[k.EIP155],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var xt=function(e){(0,c.Z)(r,e);var t=wt(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this,e),(0,h.Z)((0,o.Z)(n),"name",D.WALLET_CONNECT_V1),(0,h.Z)((0,o.Z)(n),"adapterNamespace",b.EIP155),(0,h.Z)((0,o.Z)(n),"currentChainNamespace",k.EIP155),(0,h.Z)((0,o.Z)(n),"type",M.EXTERNAL),(0,h.Z)((0,o.Z)(n),"adapterOptions",void 0),(0,h.Z)((0,o.Z)(n),"status",G.NOT_READY),(0,h.Z)((0,o.Z)(n),"adapterData",{uri:"",extensionAdapters:yt}),(0,h.Z)((0,o.Z)(n),"connector",null),(0,h.Z)((0,o.Z)(n),"wcProvider",null),(0,h.Z)((0,o.Z)(n),"rehydrated",!1),n.adapterOptions=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n.chainConfig=e.chainConfig||null,n.sessionTime=e.sessionTime||86400,n}return(0,i.Z)(r,[{key:"connected",get:function(){var e;return!(null===(e=this.connector)||void 0===e||!e.connected)}},{key:"provider",get:function(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:function(){var e=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.Z)((0,p.Z)(r.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=P(k.EIP155,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new Ie({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(F.READY,D.WALLET_CONNECT_V1),this.status=G.READY,W.debug("initializing wallet connect v1 adapter"),!this.connector.connected){e.next=11;break}return this.rehydrated=!0,e.next=11,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,a,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.Z)((0,p.Z)(r.prototype),"checkConnectionRequirements",this).call(this),this.connector){e.next=3;break}throw C.notReady("Wallet adapter is not ready yet");case 3:if(!this.connected){e.next=7;break}return e.next=6,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 6:return e.abrupt("return",this.provider);case 7:if(this.status===G.CONNECTING){e.next=13;break}return null!==(t=this.adapterOptions.adapterSettings)&&void 0!==t&&t.qrcodeModal&&(this.connector=this.getWalletConnectInstance(),this.wcProvider=new Ie({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(a=this.adapterOptions.adapterSettings)||void 0===a?void 0:a.skipNetworkSwitching},connector:this.connector})),e.next=11,this.createNewSession();case 11:this.status=G.CONNECTING,this.emit(F.CONNECTING,{adapter:D.WALLET_CONNECT_V1});case 13:return e.abrupt("return",new Promise((function(e,t){if(!i.connector)return t(C.notReady("Wallet adapter is not ready yet"));i.connector.on("modal_closed",(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.status=G.READY,i.emit(F.READY,D.WALLET_CONNECT_V1),e.abrupt("return",t(new Error("User closed modal")));case 3:case"end":return e.stop()}}),e)}))));try{i.connector.on("connect",function(){var t=(0,n.Z)(d().mark((function t(r,n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r&&i.emit(F.ERRORED,r),W.debug("connected event emitted by web3auth"),t.next=4,i.onConnectHandler(n.params[0]);case 4:return t.abrupt("return",e(i.provider));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}catch(r){W.error("Wallet connect v1 adapter error while connecting",r),i.status=G.READY,i.rehydrated=!0,i.emit(F.ERRORED,r),t(r instanceof O?r:N.connectionError("Failed to login with wallet connect: ".concat((null===r||void 0===r?void 0:r.message)||"")))}})));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAdapterSettings",value:function(e){this.status!==G.READY&&(null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!==e&&void 0!==e&&e.clientId&&(this.clientId=e.clientId))}},{key:"getUserInfo",value:function(){var e=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connected){e.next=2;break}throw N.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,n=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(n.length>0&&void 0!==n[0]?n[0]:{cleanup:!1}).cleanup,this.connector&&this.connected){e.next=4;break}throw N.notConnectedError("Not connected with wallet");case 4:return e.next=6,(0,s.Z)((0,p.Z)(r.prototype),"disconnect",this).call(this);case 6:return e.next=8,this.connector.killSession();case 8:this.rehydrated=!1,t?(this.connector=null,this.status=G.NOT_READY,this.wcProvider=null):this.status=G.READY,this.emit(F.DISCONNECTED);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.wcProvider){e.next=3;break}throw C.notReady("Wallet adapter is not ready yet");case 3:if(!(n=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.networkSwitchModal)){e.next=7;break}return e.next=7,n.addNetwork({chainConfig:t,appOrigin:window.location.hostname});case 7:return e.next=9,this.wcProvider.addChain(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),W.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(d().mark((function e(t,r){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.wcProvider){e.next=2;break}throw C.notReady("Wallet adapter is not ready yet");case 2:if(!(a=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.networkSwitchModal)){e.next=6;break}return e.next=6,a.switchNetwork({currentChainConfig:r,newChainConfig:t,appOrigin:window.location.hostname});case 6:return e.next=8,this.wcProvider.switchChain({chainId:r.chainId,lookup:!1,addChain:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createNewSession",value:function(){var e=(0,n.Z)(d().mark((function e(){var t,r,a,i,o=this,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>0&&void 0!==s[0]?s[0]:{forceNewSession:!1},this.connector){e.next=3;break}throw C.notReady("Wallet adapter is not ready yet");case 3:if(!a.forceNewSession||!this.connector.pending){e.next=6;break}return e.next=6,this.connector.killSession();case 6:if(null===(t=this.adapterOptions)||void 0===t||null===(r=t.adapterSettings)||void 0===r||!r.qrcodeModal){e.next=10;break}return e.next=9,this.connector.createSession({chainId:parseInt((null===(i=this.chainConfig)||void 0===i?void 0:i.chainId)||"0x1",16)});case 9:return e.abrupt("return");case 10:return e.abrupt("return",new Promise((function(e,t){var r;if(!o.connector)return t(C.notReady("Wallet adapter is not ready yet"));W.debug("creating new session for web3auth wallet connect"),o.connector.on("display_uri",function(){var r=(0,n.Z)(d().mark((function r(n,a){var i,s;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=3;break}return o.emit(F.ERRORED,N.connectionError("Failed to display wallet connect qr code")),r.abrupt("return",t(n));case 3:return s=a.params[0],o.updateAdapterData({uri:s,extensionAdapters:yt}),null===(i=o.connector)||void 0===i||i.off("display_uri"),r.abrupt("return",e());case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()),o.connector.createSession({chainId:parseInt((null===(r=o.chainConfig)||void 0===r?void 0:r.chainId)||"0x1",16)}).catch((function(e){return W.error("error while creating new wallet connect session",e),o.emit(F.ERRORED,e),t(e)}))})));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onConnectHandler",value:function(){var e=(0,n.Z)(d().mark((function e(t){var r,n,a,i,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector&&this.wcProvider){e.next=2;break}throw C.notReady("Wallet adapter is not ready yet");case 2:if(this.chainConfig){e.next=4;break}throw C.invalidParams("Chain config is not set");case 4:if(r=t.chainId,W.debug("connected chainId in hex"),r===parseInt(this.chainConfig.chainId,16)){e.next=27;break}if(o=P(k.EIP155,r)||{chainId:"0x".concat(r.toString(16)),displayName:"Unknown Network"},(s=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.qrcodeModal)&&(!s||null!==(a=this.adapterOptions)&&void 0!==a&&null!==(i=a.adapterSettings)&&void 0!==i&&i.skipNetworkSwitching)){e.next=27;break}return e.prev=10,e.next=13,this.addChain(this.chainConfig);case 13:return e.next=15,this.switchChain(o,this.chainConfig);case 15:this.connector=this.getWalletConnectInstance(),e.next=27;break;case 18:return e.prev=18,e.t0=e.catch(10),W.error("error while chain switching",e.t0),e.next=23,this.createNewSession({forceNewSession:!0});case 23:return this.emit(F.ERRORED,C.fromCode(5e3,"Not connected to correct network. Expected: ".concat(this.chainConfig.displayName,", Current: ").concat((null===o||void 0===o?void 0:o.displayName)||r,", Please switch to correct network from wallet"))),this.status=G.READY,this.rehydrated=!0,e.abrupt("return");case 27:return e.next=29,this.wcProvider.setupProvider(this.connector);case 29:this.subscribeEvents(this.connector),this.status=G.CONNECTED,this.emit(F.CONNECTED,{adapter:D.WALLET_CONNECT_V1,reconnected:this.rehydrated});case 32:case"end":return e.stop()}}),e,this,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeEvents",value:function(e){var t=this;e.on("session_update",function(){var e=(0,n.Z)(d().mark((function e(r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&t.emit(F.ERRORED,r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"getWalletConnectInstance",value:function(){var e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new l.Z(e)}}]),r}(J)}}]);